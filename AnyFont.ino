//######################################################################################
//######################################################################################
//######################################################################################
//######################################          ######################################
//###################################### WARNING: ######################################
//######################################          ######################################
//######################################################################################
//######################################################################################
//###                                                                                ###
//### This code file is automatically generated.                                     ###
//###  Any modifications to this file will be erased next generation.                ###
//###                                                                                ###
//### If you want to modify the code, modify .\arduinotemplate\arduinotemplate.ino   ###
//###                                                                                ###
//######################################################################################
//######################################################################################
//######################################################################################









// AVR boards like the Nano have to explicitly be told to leave variables in progmem
//  Whereas SAMD boards do this by default on constant data - so the "MEM_TYPE" keyword is replaced with nothing on SAMD boards.

// About "SAMD_CONST", due to the differences in how PROGMEM and SRAM work, we have to change whether they are const or not to save the most space

#ifdef __AVR__
#define MEM_TYPE PROGMEM
#define SAMD_CONST
#else
#define MEM_TYPE
#define SAMD_CONST const
#endif


#include <stdint.h>

struct Point {
    SAMD_CONST uint8_t x;
    SAMD_CONST uint8_t y;
};

struct Contour {
    SAMD_CONST Point* points;
    SAMD_CONST uint8_t pointCount;
};

struct Letter {
    SAMD_CONST char letter;
    SAMD_CONST Contour* contours;
    SAMD_CONST uint8_t contourCount;
};

const Point A_contour1_points[] MEM_TYPE = {
	{98, 3},
	{98, 16},
	{97, 17},
	{98, 20},
	{98, 22},
	{97, 37},
	{95, 38},
	{93, 39},
	{85, 43},
	{84, 43},
	{83, 45},
	{82, 48},
	{81, 50},
	{79, 53},
	{79, 55},
	{77, 59},
	{76, 61},
	{75, 63},
	{75, 65},
	{73, 68},
	{72, 70},
	{70, 74},
	{70, 76},
	{68, 79},
	{67, 81},
	{65, 85},
	{65, 87},
	{63, 90},
	{62, 92},
	{61, 96},
	{60, 98},
	{58, 101},
	{57, 103},
	{56, 106},
	{56, 107},
	{54, 111},
	{53, 113},
	{52, 115},
	{50, 125},
	{47, 127},
	{46, 127},
	{46, 128},
	{46, 129},
	{44, 133},
	{43, 135},
	{42, 139},
	{41, 140},
	{40, 143},
	{39, 145},
	{37, 148},
	{37, 150},
	{35, 154},
	{34, 156},
	{32, 159},
	{32, 161},
	{30, 165},
	{26, 176},
	{25, 186},
	{24, 186},
	{24, 187},
	{23, 188},
	{18, 190},
	{12, 192},
	{4, 193},
	{1, 193}
};
const Point A_contour2_points[] MEM_TYPE = {
	{50, 126},
	{50, 126},
	{124, 126},
	{125, 126},
	{131, 120},
	{132, 120},
	{133, 120},
	{135, 122},
	{135, 123},
	{136, 125},
	{136, 126},
	{137, 129},
	{138, 131},
	{139, 132},
	{139, 134},
	{140, 135},
	{140, 137},
	{142, 139},
	{142, 141},
	{143, 143},
	{144, 145},
	{145, 147},
	{145, 148},
	{147, 151},
	{147, 153},
	{148, 155},
	{149, 157},
	{150, 158},
	{150, 160},
	{151, 162},
	{153, 166},
	{153, 169},
	{154, 170},
	{156, 178},
	{156, 181},
	{147, 190},
	{146, 190},
	{145, 192},
	{143, 192},
	{142, 192},
	{139, 193},
	{123, 193}
};
const Point A_contour3_points[] MEM_TYPE = {
	{145, 192},
	{145, 191},
	{147, 190},
	{156, 181},
	{158, 183},
	{160, 184},
	{169, 188},
	{171, 189},
	{172, 189},
	{178, 191},
	{185, 192},
	{196, 193}
};
const Point A_contour4_points[] MEM_TYPE = {
	{132, 120},
	{131, 119},
	{131, 118},
	{129, 109},
	{128, 106},
	{128, 104},
	{127, 103},
	{126, 101},
	{125, 99},
	{125, 97},
	{123, 95},
	{123, 93},
	{122, 92},
	{122, 90},
	{120, 87},
	{120, 86},
	{118, 83},
	{118, 81},
	{117, 80},
	{117, 78},
	{115, 76},
	{115, 74},
	{114, 73},
	{114, 71},
	{112, 68},
	{112, 67},
	{111, 64},
	{110, 62},
	{109, 61},
	{109, 59},
	{107, 57},
	{107, 55},
	{106, 54},
	{106, 52},
	{104, 50},
	{104, 48},
	{103, 46},
	{103, 45},
	{102, 43},
	{101, 42},
	{100, 39},
	{100, 38},
	{98, 37}
};
const Point B_contour1_points[] MEM_TYPE = {
	{3, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{34, 7},
	{36, 9},
	{37, 9},
	{43, 179},
	{36, 186},
	{34, 188},
	{28, 190},
	{21, 192},
	{18, 193},
	{3, 193}
};
const Point B_contour2_points[] MEM_TYPE = {
	{36, 186},
	{37, 186},
	{43, 180},
	{51, 189},
	{68, 190},
	{90, 190},
	{96, 189},
	{101, 189},
	{107, 187},
	{111, 185},
	{111, 184},
	{112, 184},
	{114, 183},
	{116, 182},
	{120, 179},
	{121, 179},
	{127, 173},
	{129, 170},
	{129, 169},
	{131, 167},
	{132, 164},
	{133, 162},
	{134, 159},
	{136, 149},
	{137, 144},
	{136, 135},
	{134, 127},
	{133, 125},
	{132, 124},
	{132, 122},
	{131, 121},
	{131, 120},
	{131, 120},
	{131, 118},
	{129, 117},
	{129, 116},
	{125, 111},
	{125, 111},
	{125, 111},
	{124, 109},
	{123, 109},
	{119, 105},
	{118, 104},
	{115, 103},
	{114, 102},
	{114, 102},
	{112, 101},
	{110, 95},
	{109, 95},
	{110, 93},
	{111, 92},
	{112, 89},
	{112, 89},
	{112, 87},
	{115, 85},
	{117, 84},
	{117, 84},
	{117, 84},
	{118, 83},
	{118, 83},
	{125, 76},
	{125, 75},
	{126, 73},
	{127, 72},
	{127, 71},
	{128, 70},
	{128, 69},
	{129, 68},
	{130, 64},
	{132, 54},
	{131, 42},
	{130, 36},
	{129, 34},
	{129, 32},
	{128, 31},
	{127, 29},
	{126, 27},
	{125, 26},
	{123, 22},
	{123, 21},
	{122, 21},
	{122, 21},
	{122, 20},
	{114, 13},
	{112, 12},
	{111, 11},
	{110, 11},
	{109, 10},
	{108, 10},
	{107, 9},
	{106, 9},
	{103, 8},
	{101, 7},
	{98, 7},
	{96, 6},
	{89, 5},
	{60, 4},
	{53, 5},
	{53, 6},
	{42, 15}
};
const Point C_contour1_points[] MEM_TYPE = {
	{160, 0},
	{160, 3},
	{159, 9},
	{157, 12},
	{156, 14},
	{154, 15},
	{151, 15},
	{144, 13},
	{143, 12},
	{141, 12},
	{139, 10},
	{136, 10},
	{135, 9},
	{133, 9},
	{132, 8},
	{121, 5},
	{111, 3},
	{94, 3},
	{82, 4},
	{78, 6},
	{67, 9},
	{67, 10},
	{65, 11},
	{59, 14},
	{54, 17},
	{50, 20},
	{39, 31},
	{35, 35},
	{35, 37},
	{32, 40},
	{31, 43},
	{31, 43},
	{30, 45},
	{30, 46},
	{28, 50},
	{28, 51},
	{27, 53},
	{26, 56},
	{25, 57},
	{25, 61},
	{24, 62},
	{23, 65},
	{23, 66},
	{21, 73},
	{18, 93},
	{20, 112},
	{20, 114},
	{21, 119},
	{21, 120},
	{23, 126},
	{23, 127},
	{25, 131},
	{25, 132},
	{26, 136},
	{27, 137},
	{28, 139},
	{28, 140},
	{29, 141},
	{29, 142},
	{30, 143},
	{31, 145},
	{31, 146},
	{31, 147},
	{33, 149},
	{34, 151},
	{36, 154},
	{37, 155},
	{40, 160},
	{45, 165},
	{48, 169},
	{49, 169},
	{50, 170},
	{50, 171},
	{51, 172},
	{54, 174},
	{55, 175},
	{62, 179},
	{64, 181},
	{66, 182},
	{70, 184},
	{74, 185},
	{75, 186},
	{88, 189},
	{99, 190},
	{100, 191},
	{101, 191},
	{121, 189},
	{128, 187},
	{129, 187},
	{131, 186},
	{132, 186},
	{136, 184},
	{140, 182},
	{142, 181},
	{142, 181},
	{143, 180},
	{144, 180},
	{148, 177},
	{149, 176},
	{154, 172},
	{162, 165},
	{167, 160},
	{171, 154},
	{172, 151},
	{173, 149},
	{175, 148},
	{175, 147},
	{174, 148}
};
const Point C_contour2_points[] MEM_TYPE = {
	{153, 15},
	{154, 15},
	{155, 17},
	{156, 18},
	{156, 20},
	{157, 21},
	{158, 25},
	{159, 26},
	{161, 34},
	{162, 35},
	{162, 38},
	{163, 39},
	{164, 42},
	{164, 43},
	{165, 47},
	{165, 49},
	{167, 55}
};
const Point D_contour1_points[] MEM_TYPE = {
	{3, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{34, 7},
	{36, 9},
	{37, 9},
	{43, 179},
	{36, 186},
	{34, 188},
	{28, 190},
	{21, 192},
	{18, 193},
	{3, 193}
};
const Point D_contour2_points[] MEM_TYPE = {
	{36, 186},
	{37, 186},
	{43, 180},
	{51, 189},
	{53, 189},
	{67, 190},
	{107, 190},
	{120, 189},
	{124, 187},
	{128, 186},
	{131, 186},
	{133, 184},
	{137, 183},
	{138, 183},
	{140, 182},
	{140, 181},
	{142, 180},
	{147, 178},
	{150, 175},
	{151, 175},
	{159, 168},
	{160, 168},
	{161, 167},
	{169, 157},
	{170, 156},
	{172, 152},
	{174, 148},
	{175, 147},
	{175, 146},
	{176, 144},
	{177, 142},
	{177, 142},
	{178, 140},
	{179, 137},
	{179, 136},
	{181, 132},
	{181, 131},
	{183, 125},
	{183, 123},
	{185, 109},
	{186, 100},
	{186, 100},
	{186, 98},
	{184, 75},
	{183, 71},
	{182, 68},
	{181, 67},
	{180, 62},
	{179, 61},
	{178, 57},
	{178, 57},
	{178, 56},
	{176, 55},
	{176, 54},
	{176, 53},
	{175, 52},
	{175, 51},
	{173, 49},
	{172, 45},
	{170, 43},
	{169, 42},
	{162, 32},
	{162, 32},
	{160, 31},
	{159, 29},
	{154, 25},
	{151, 22},
	{150, 21},
	{147, 20},
	{146, 19},
	{144, 18},
	{134, 13},
	{129, 12},
	{128, 11},
	{122, 9},
	{112, 7},
	{103, 6},
	{68, 6},
	{53, 7},
	{53, 7},
	{50, 7},
	{42, 15}
};
const Point E_contour1_points[] MEM_TYPE = {
	{3, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{34, 7},
	{36, 9},
	{37, 9},
	{43, 179},
	{36, 186},
	{34, 188},
	{28, 190},
	{21, 192},
	{18, 193},
	{3, 193}
};
const Point E_contour2_points[] MEM_TYPE = {
	{36, 186},
	{37, 186},
	{43, 180},
	{48, 186},
	{51, 187},
	{51, 187},
	{56, 189},
	{139, 189},
	{143, 189},
	{145, 188},
	{146, 187},
	{147, 187},
	{150, 183},
	{153, 179},
	{153, 178},
	{153, 177},
	{154, 176},
	{154, 175},
	{155, 174},
	{155, 173},
	{156, 172},
	{156, 171},
	{157, 170},
	{158, 168},
	{158, 168},
	{159, 166},
	{161, 161},
	{162, 158},
	{163, 156},
	{164, 154},
	{165, 152},
	{165, 150}
};
const Point E_contour3_points[] MEM_TYPE = {
	{43, 180},
	{43, 92},
	{126, 92},
	{128, 93},
	{128, 95},
	{129, 96},
	{129, 98},
	{131, 104},
	{133, 122}
};
const Point E_contour4_points[] MEM_TYPE = {
	{128, 93},
	{127, 92},
	{128, 89},
	{129, 87},
	{129, 86},
	{131, 79},
	{133, 62}
};
const Point E_contour5_points[] MEM_TYPE = {
	{43, 15},
	{53, 6},
	{136, 6},
	{137, 7},
	{140, 7},
	{142, 9},
	{143, 10},
	{145, 16},
	{146, 20},
	{147, 27},
	{148, 29},
	{149, 37},
	{150, 37},
	{150, 41},
	{149, 36}
};
const Point F_contour1_points[] MEM_TYPE = {
	{3, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{34, 7},
	{36, 9},
	{37, 9},
	{43, 179},
	{36, 186},
	{34, 188},
	{28, 190},
	{21, 192},
	{18, 193},
	{3, 193}
};
const Point F_contour2_points[] MEM_TYPE = {
	{36, 186},
	{37, 186},
	{43, 180},
	{49, 186},
	{53, 189},
	{54, 189},
	{56, 190},
	{57, 190},
	{64, 192},
	{68, 193},
	{82, 193}
};
const Point F_contour3_points[] MEM_TYPE = {
	{43, 180},
	{43, 92},
	{120, 92},
	{120, 92},
	{121, 92},
	{122, 92},
	{126, 92},
	{128, 93},
	{129, 96},
	{131, 101},
	{132, 108},
	{133, 122}
};
const Point F_contour4_points[] MEM_TYPE = {
	{128, 93},
	{127, 92},
	{129, 88},
	{131, 82},
	{132, 76},
	{133, 62}
};
const Point F_contour5_points[] MEM_TYPE = {
	{43, 15},
	{53, 6},
	{140, 6},
	{147, 7},
	{148, 8},
	{149, 8},
	{150, 9},
	{150, 10},
	{151, 10},
	{152, 13},
	{154, 20},
	{154, 21},
	{156, 27},
	{156, 29},
	{158, 36},
	{159, 40}
};
const Point G_contour1_points[] MEM_TYPE = {
	{175, 2},
	{175, 5},
	{172, 14},
	{172, 15},
	{172, 15},
	{168, 18},
	{168, 18},
	{160, 16},
	{156, 15},
	{153, 14},
	{151, 13},
	{147, 10},
	{145, 10},
	{143, 9},
	{132, 6},
	{126, 4},
	{122, 4},
	{100, 3},
	{86, 6},
	{79, 7},
	{75, 9},
	{70, 11},
	{68, 12},
	{64, 14},
	{62, 15},
	{61, 16},
	{57, 18},
	{56, 19},
	{50, 24},
	{50, 24},
	{45, 28},
	{45, 29},
	{44, 30},
	{43, 30},
	{43, 31},
	{39, 36},
	{37, 38},
	{37, 39},
	{35, 42},
	{34, 44},
	{32, 46},
	{32, 48},
	{31, 48},
	{31, 50},
	{30, 51},
	{30, 51},
	{29, 53},
	{28, 56},
	{27, 59},
	{26, 61},
	{25, 65},
	{25, 66},
	{24, 69},
	{23, 70},
	{21, 79},
	{20, 94},
	{19, 95},
	{20, 113},
	{20, 117},
	{21, 120},
	{21, 124},
	{22, 125},
	{23, 128},
	{25, 134},
	{25, 136},
	{26, 137},
	{26, 139},
	{27, 140},
	{29, 144},
	{29, 145},
	{29, 146},
	{31, 147},
	{31, 148},
	{32, 150},
	{33, 151},
	{38, 158},
	{39, 160},
	{43, 165},
	{43, 165},
	{44, 166},
	{45, 166},
	{46, 167},
	{46, 168},
	{46, 168},
	{54, 175},
	{58, 178},
	{59, 178},
	{61, 179},
	{62, 180},
	{64, 181},
	{68, 183},
	{70, 184},
	{74, 186},
	{78, 187},
	{86, 189},
	{100, 192},
	{118, 192},
	{129, 191},
	{137, 189},
	{144, 187},
	{147, 186},
	{149, 185},
	{151, 184},
	{154, 183},
	{155, 183},
	{157, 181},
	{158, 181},
	{158, 181},
	{159, 181},
	{161, 179},
	{161, 179},
	{162, 179},
	{163, 177},
	{164, 175},
	{164, 173},
	{168, 166},
	{168, 164},
	{170, 162},
	{170, 105},
	{176, 99},
	{178, 98},
	{179, 97},
	{180, 97},
	{181, 96},
	{183, 96},
	{184, 95},
	{190, 93},
	{193, 93},
	{204, 92}
};
const Point G_contour2_points[] MEM_TYPE = {
	{176, 99},
	{170, 104},
	{163, 98},
	{161, 97},
	{158, 96},
	{150, 93},
	{147, 93},
	{133, 92}
};
const Point G_contour3_points[] MEM_TYPE = {
	{168, 18},
	{170, 22},
	{171, 25},
	{172, 29},
	{173, 30},
	{174, 34},
	{175, 35},
	{176, 40},
	{176, 42},
	{178, 47},
	{178, 48},
	{179, 52},
	{180, 54},
	{180, 56},
	{179, 53}
};
const Point H_contour1_points[] MEM_TYPE = {
	{3, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{34, 7},
	{36, 9},
	{37, 9},
	{43, 179},
	{36, 186},
	{34, 188},
	{28, 190},
	{21, 192},
	{18, 193},
	{3, 193}
};
const Point H_contour2_points[] MEM_TYPE = {
	{36, 186},
	{37, 186},
	{43, 180},
	{49, 186},
	{53, 189},
	{54, 189},
	{56, 190},
	{57, 190},
	{64, 192},
	{68, 193},
	{82, 193}
};
const Point H_contour3_points[] MEM_TYPE = {
	{43, 180},
	{43, 101},
	{161, 101},
	{162, 179},
	{155, 186},
	{153, 188},
	{147, 190},
	{140, 192},
	{137, 193},
	{123, 193}
};
const Point H_contour4_points[] MEM_TYPE = {
	{155, 186},
	{156, 186},
	{162, 180},
	{168, 186},
	{172, 189},
	{173, 189},
	{175, 190},
	{176, 190},
	{183, 192},
	{187, 193},
	{201, 193}
};
const Point H_contour5_points[] MEM_TYPE = {
	{162, 180},
	{162, 15},
	{168, 9},
	{170, 7},
	{176, 5},
	{182, 3},
	{192, 2},
	{201, 1}
};
const Point H_contour6_points[] MEM_TYPE = {
	{168, 9},
	{162, 15},
	{156, 9},
	{153, 7},
	{149, 6},
	{147, 5},
	{146, 4},
	{142, 3},
	{139, 3},
	{123, 1}
};
const Point H_contour7_points[] MEM_TYPE = {
	{162, 15},
	{162, 100}
};
const Point H_contour8_points[] MEM_TYPE = {
	{162, 15},
	{162, 100}
};
const Point H_contour9_points[] MEM_TYPE = {
	{43, 15},
	{49, 9},
	{51, 7},
	{57, 5},
	{61, 4},
	{63, 3},
	{66, 3},
	{82, 1}
};
const Point I_contour1_points[] MEM_TYPE = {
	{3, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{34, 7},
	{36, 9},
	{37, 9},
	{43, 179},
	{36, 186},
	{34, 188},
	{28, 190},
	{21, 192},
	{18, 193},
	{3, 193}
};
const Point I_contour2_points[] MEM_TYPE = {
	{36, 186},
	{37, 186},
	{43, 180},
	{49, 186},
	{53, 189},
	{54, 189},
	{56, 190},
	{57, 190},
	{64, 192},
	{68, 193},
	{82, 193}
};
const Point I_contour3_points[] MEM_TYPE = {
	{43, 15},
	{49, 9},
	{51, 7},
	{57, 5},
	{61, 4},
	{63, 3},
	{66, 3},
	{82, 1}
};
const Point J_contour1_points[] MEM_TYPE = {
	{20, 1},
	{35, 2},
	{39, 3},
	{43, 4},
	{44, 4},
	{46, 5},
	{49, 7},
	{53, 9},
	{53, 9},
	{59, 124},
	{57, 150},
	{56, 161},
	{50, 180},
	{50, 181},
	{50, 181},
	{48, 184},
	{47, 185},
	{47, 186},
	{46, 186},
	{46, 186},
	{46, 187},
	{45, 187},
	{43, 189},
	{42, 189},
	{39, 190},
	{33, 192},
	{26, 192},
	{24, 191},
	{21, 189},
	{18, 187},
	{17, 187},
	{17, 186},
	{15, 185},
	{15, 184},
	{11, 179}
};
const Point J_contour2_points[] MEM_TYPE = {
	{59, 15},
	{66, 9},
	{68, 7},
	{73, 5},
	{79, 3},
	{82, 3},
	{98, 1}
};
const Point K_contour1_points[] MEM_TYPE = {
	{3, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{34, 7},
	{36, 9},
	{37, 9},
	{43, 179},
	{36, 186},
	{34, 188},
	{28, 190},
	{21, 192},
	{18, 193},
	{3, 193}
};
const Point K_contour2_points[] MEM_TYPE = {
	{36, 186},
	{37, 186},
	{43, 180},
	{49, 186},
	{53, 189},
	{54, 189},
	{56, 190},
	{57, 190},
	{64, 192},
	{68, 193},
	{82, 193}
};
const Point K_contour3_points[] MEM_TYPE = {
	{43, 180},
	{43, 98},
	{43, 98},
	{75, 98},
	{142, 168},
	{143, 169},
	{143, 170},
	{146, 174},
	{148, 179},
	{148, 181},
	{139, 190},
	{136, 192},
	{133, 192},
	{118, 193}
};
const Point K_contour4_points[] MEM_TYPE = {
	{137, 191},
	{139, 190},
	{148, 181},
	{149, 181},
	{168, 187},
	{179, 190},
	{190, 192},
	{204, 193}
};
const Point K_contour5_points[] MEM_TYPE = {
	{143, 169},
	{134, 159},
	{76, 98},
	{76, 98},
	{77, 94},
	{78, 93},
	{80, 86},
	{81, 84},
	{81, 84},
	{126, 34},
	{132, 28},
	{135, 23},
	{136, 21},
	{137, 17},
	{139, 10},
	{157, 4},
	{168, 3},
	{179, 2}
};
const Point K_contour6_points[] MEM_TYPE = {
	{126, 34},
	{94, 70},
	{89, 75},
	{88, 75},
	{87, 76}
};
const Point K_contour7_points[] MEM_TYPE = {
	{43, 15},
	{49, 9},
	{51, 7},
	{57, 5},
	{61, 4},
	{63, 3},
	{66, 3},
	{82, 1}
};
const Point L_contour1_points[] MEM_TYPE = {
	{3, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{34, 7},
	{36, 9},
	{37, 9},
	{43, 179},
	{36, 186},
	{34, 188},
	{28, 190},
	{21, 192},
	{18, 193},
	{3, 193}
};
const Point L_contour2_points[] MEM_TYPE = {
	{36, 186},
	{37, 186},
	{43, 180},
	{49, 186},
	{50, 186},
	{51, 187},
	{54, 188},
	{57, 189},
	{126, 189},
	{137, 188},
	{138, 187},
	{140, 187},
	{142, 186},
	{142, 185},
	{143, 184},
	{143, 184},
	{145, 183},
	{145, 181},
	{148, 178},
	{148, 176},
	{148, 176},
	{150, 173},
	{151, 172},
	{154, 164},
	{155, 162},
	{157, 159},
	{159, 151},
	{161, 149},
	{161, 147}
};
const Point L_contour3_points[] MEM_TYPE = {
	{43, 15},
	{49, 9},
	{51, 7},
	{57, 5},
	{61, 4},
	{63, 3},
	{66, 3},
	{82, 1}
};
const Point M_contour1_points[] MEM_TYPE = {
	{3, 1},
	{6, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{32, 7},
	{38, 10},
	{42, 15},
	{43, 21},
	{43, 21},
	{43, 23},
	{34, 187},
	{28, 190},
	{21, 192},
	{18, 193},
	{3, 193}
};
const Point M_contour2_points[] MEM_TYPE = {
	{34, 187},
	{35, 189},
	{39, 190},
	{44, 192},
	{51, 193},
	{65, 193}
};
const Point M_contour3_points[] MEM_TYPE = {
	{34, 187},
	{34, 32},
	{43, 23},
	{45, 23},
	{46, 25},
	{48, 26},
	{51, 27},
	{51, 27},
	{53, 28},
	{54, 32},
	{55, 34},
	{57, 39},
	{58, 41},
	{60, 45},
	{61, 46},
	{63, 51},
	{64, 53},
	{65, 57},
	{66, 59},
	{68, 64},
	{69, 65},
	{71, 70},
	{72, 72},
	{75, 77},
	{75, 79},
	{78, 84},
	{78, 86},
	{81, 90},
	{81, 92},
	{84, 97},
	{84, 99},
	{87, 104},
	{87, 106},
	{90, 112},
	{91, 114},
	{93, 118},
	{94, 120},
	{96, 124},
	{96, 126},
	{99, 131},
	{100, 132},
	{101, 136},
	{102, 138},
	{104, 143},
	{105, 145},
	{107, 148},
	{107, 150},
	{110, 155},
	{111, 156},
	{111, 157},
	{112, 158},
	{114, 159},
	{114, 159},
	{123, 154},
	{125, 153},
	{128, 151},
	{129, 149},
	{129, 147},
	{131, 143},
	{132, 142},
	{133, 139},
	{134, 137},
	{136, 134},
	{136, 132},
	{138, 128},
	{139, 126},
	{141, 122},
	{142, 120},
	{143, 116},
	{144, 114},
	{146, 111},
	{147, 109},
	{148, 105},
	{149, 103},
	{151, 98},
	{152, 96},
	{154, 93},
	{154, 91},
	{156, 87},
	{157, 86},
	{159, 82},
	{159, 80},
	{161, 76},
	{162, 75},
	{164, 70},
	{165, 68},
	{167, 64},
	{167, 62},
	{169, 59},
	{170, 57},
	{172, 53},
	{172, 51},
	{175, 46},
	{175, 45},
	{177, 41},
	{178, 39},
	{179, 37},
	{179, 35},
	{181, 31},
	{187, 28},
	{189, 27},
	{196, 23},
	{198, 22},
	{200, 21},
	{200, 21},
	{201, 21},
	{202, 179},
	{195, 186},
	{192, 189},
	{189, 190},
	{181, 192},
	{177, 193},
	{163, 193}
};
const Point M_contour4_points[] MEM_TYPE = {
	{193, 187},
	{196, 186},
	{197, 186},
	{202, 180},
	{208, 186},
	{211, 188},
	{215, 190},
	{223, 192},
	{227, 193},
	{241, 193}
};
const Point M_contour5_points[] MEM_TYPE = {
	{201, 21},
	{201, 17},
	{202, 17},
	{202, 15},
	{209, 9},
	{211, 7},
	{216, 5},
	{222, 3},
	{225, 3},
	{241, 1}
};
const Point N_contour1_points[] MEM_TYPE = {
	{144, 1},
	{159, 2},
	{165, 3},
	{168, 4},
	{173, 7},
	{173, 7},
	{175, 8},
	{175, 9},
	{174, 9},
	{175, 11},
	{175, 13},
	{174, 146},
	{166, 154},
	{159, 152},
	{157, 151},
	{156, 150},
	{118, 105},
	{76, 56},
	{55, 31},
	{55, 31},
	{51, 29},
	{50, 29},
	{48, 28},
	{46, 28},
	{45, 26},
	{43, 20},
	{42, 16},
	{42, 15},
	{38, 11},
	{36, 10},
	{32, 9},
	{31, 9},
	{15, 4},
	{8, 3},
	{0, 2}
};
const Point N_contour2_points[] MEM_TYPE = {
	{45, 26},
	{45, 26},
	{37, 179},
	{36, 180},
	{36, 182},
	{37, 183},
	{37, 187},
	{36, 188},
	{34, 189},
	{34, 189},
	{32, 190},
	{31, 190},
	{25, 192},
	{20, 193},
	{6, 193}
};
const Point N_contour3_points[] MEM_TYPE = {
	{36, 188},
	{37, 188},
	{41, 190},
	{49, 192},
	{53, 193},
	{67, 193}
};
const Point N_contour4_points[] MEM_TYPE = {
	{37, 179},
	{37, 35},
	{46, 27}
};
const Point N_contour5_points[] MEM_TYPE = {
	{53, 30},
	{54, 30},
	{98, 82},
	{148, 140},
	{154, 148}
};
const Point N_contour6_points[] MEM_TYPE = {
	{165, 154},
	{165, 154},
	{166, 155},
	{167, 159},
	{169, 165},
	{171, 172},
	{172, 176},
	{174, 182},
	{176, 188},
	{177, 190}
};
const Point N_contour7_points[] MEM_TYPE = {
	{175, 9},
	{175, 7},
	{179, 5},
	{186, 3},
	{195, 2},
	{205, 1}
};
const Point O_contour1_points[] MEM_TYPE = {
	{88, 4},
	{79, 5},
	{72, 7},
	{71, 7},
	{69, 8},
	{67, 9},
	{65, 10},
	{64, 10},
	{62, 12},
	{59, 14},
	{56, 15},
	{55, 16},
	{47, 23},
	{46, 23},
	{45, 24},
	{45, 25},
	{45, 25},
	{40, 29},
	{35, 36},
	{35, 37},
	{32, 41},
	{30, 46},
	{29, 48},
	{28, 52},
	{27, 54},
	{26, 55},
	{26, 57},
	{25, 59},
	{24, 63},
	{23, 67},
	{22, 71},
	{21, 73},
	{18, 94},
	{20, 114},
	{20, 115},
	{21, 120},
	{21, 122},
	{22, 126},
	{23, 127},
	{24, 132},
	{25, 133},
	{26, 137},
	{27, 140},
	{28, 140},
	{29, 143},
	{29, 145},
	{29, 146},
	{30, 147},
	{30, 148},
	{31, 149},
	{33, 153},
	{34, 154},
	{35, 157},
	{37, 159},
	{38, 161},
	{42, 165},
	{48, 173},
	{57, 181},
	{59, 182},
	{63, 184},
	{65, 185},
	{68, 186},
	{80, 190},
	{87, 191},
	{95, 192},
	{111, 191},
	{117, 190},
	{123, 188},
	{124, 187},
	{126, 187},
	{134, 183},
	{140, 178},
	{143, 175},
	{144, 175},
	{145, 174},
	{145, 173},
	{146, 173},
	{147, 172},
	{154, 163},
	{155, 162},
	{157, 159},
	{158, 157},
	{158, 156},
	{159, 155},
	{159, 154},
	{160, 153},
	{161, 151},
	{161, 151},
	{162, 149},
	{163, 147},
	{164, 144},
	{164, 143},
	{165, 139},
	{166, 138},
	{167, 135},
	{167, 134},
	{168, 130},
	{168, 129},
	{172, 104},
	{172, 104},
	{170, 76},
	{169, 70},
	{168, 67},
	{167, 64},
	{167, 61},
	{166, 59},
	{165, 56},
	{164, 54},
	{163, 51},
	{161, 47},
	{161, 46},
	{161, 45},
	{159, 44},
	{158, 40},
	{155, 37},
	{154, 35},
	{151, 31},
	{148, 26},
	{140, 19},
	{135, 15},
	{134, 14},
	{132, 13},
	{129, 12},
	{128, 10},
	{126, 10},
	{124, 9},
	{123, 9},
	{119, 7},
	{118, 7},
	{111, 5},
	{107, 4}
};
const Point P_contour1_points[] MEM_TYPE = {
	{3, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{34, 7},
	{36, 9},
	{37, 9},
	{43, 179},
	{36, 186},
	{34, 188},
	{28, 190},
	{21, 192},
	{18, 193},
	{3, 193}
};
const Point P_contour2_points[] MEM_TYPE = {
	{36, 186},
	{37, 186},
	{43, 180},
	{49, 186},
	{53, 189},
	{54, 189},
	{56, 190},
	{57, 190},
	{64, 192},
	{68, 193},
	{82, 193}
};
const Point P_contour3_points[] MEM_TYPE = {
	{43, 180},
	{43, 99},
	{43, 98},
	{54, 98},
	{62, 100},
	{71, 101},
	{78, 103},
	{91, 103},
	{98, 101},
	{103, 100},
	{105, 99},
	{107, 98},
	{111, 96},
	{118, 91},
	{118, 91},
	{125, 84},
	{126, 82},
	{126, 82},
	{127, 79},
	{128, 78},
	{128, 78},
	{129, 76},
	{129, 75},
	{132, 67},
	{134, 56},
	{134, 55},
	{134, 53},
	{132, 42},
	{132, 41},
	{131, 37},
	{130, 35},
	{129, 32},
	{128, 32},
	{128, 31},
	{127, 29},
	{126, 28},
	{123, 24},
	{117, 17},
	{114, 15},
	{113, 14},
	{112, 14},
	{111, 12},
	{109, 12},
	{106, 10},
	{102, 9},
	{101, 9},
	{99, 8},
	{89, 6},
	{57, 6},
	{52, 6},
	{51, 7},
	{42, 15}
};
const Point Q_contour1_points[] MEM_TYPE = {
	{90, 3},
	{80, 4},
	{70, 7},
	{67, 9},
	{65, 9},
	{60, 12},
	{56, 15},
	{50, 20},
	{49, 20},
	{43, 26},
	{43, 26},
	{42, 28},
	{42, 28},
	{37, 34},
	{35, 37},
	{34, 39},
	{32, 41},
	{31, 43},
	{31, 44},
	{30, 45},
	{29, 47},
	{29, 48},
	{28, 50},
	{28, 50},
	{28, 52},
	{27, 53},
	{26, 57},
	{25, 59},
	{23, 65},
	{23, 67},
	{22, 71},
	{21, 73},
	{18, 95},
	{20, 114},
	{20, 115},
	{21, 120},
	{21, 122},
	{22, 126},
	{23, 127},
	{24, 132},
	{25, 133},
	{26, 137},
	{26, 139},
	{28, 142},
	{28, 143},
	{28, 143},
	{29, 145},
	{30, 147},
	{30, 148},
	{31, 149},
	{33, 153},
	{34, 154},
	{35, 157},
	{37, 159},
	{38, 161},
	{43, 168},
	{54, 178},
	{59, 181},
	{60, 182},
	{62, 183},
	{64, 184},
	{66, 186},
	{67, 186},
	{70, 187},
	{71, 187},
	{73, 189},
	{75, 190},
	{76, 190},
	{79, 192},
	{81, 192},
	{82, 193},
	{88, 195},
	{94, 197},
	{98, 198},
	{105, 200},
	{106, 201},
	{106, 203},
	{107, 204},
	{107, 204},
	{107, 206},
	{109, 207},
	{109, 208},
	{115, 215},
	{120, 220},
	{125, 224},
	{131, 228},
	{134, 229},
	{136, 231},
	{145, 235},
	{147, 236},
	{150, 237},
	{154, 239},
	{156, 239},
	{160, 240},
	{161, 241},
	{167, 242},
	{168, 243},
	{179, 245}
};
const Point Q_contour2_points[] MEM_TYPE = {
	{132, 229},
	{125, 223},
	{120, 220},
	{120, 220},
	{118, 219},
	{118, 218},
	{113, 212},
	{112, 212},
	{112, 212},
	{110, 209}
};
const Point Q_contour3_points[] MEM_TYPE = {
	{106, 200},
	{112, 193},
	{114, 191},
	{114, 190},
	{118, 189},
	{121, 189},
	{122, 188},
	{124, 187},
	{134, 182},
	{141, 177},
	{149, 170},
	{149, 169},
	{150, 168},
	{151, 168},
	{154, 164},
	{155, 161},
	{157, 158},
	{158, 157},
	{159, 154},
	{160, 153},
	{160, 152},
	{161, 151},
	{161, 150},
	{162, 148},
	{163, 146},
	{164, 142},
	{165, 141},
	{165, 139},
	{166, 137},
	{167, 134},
	{167, 132},
	{168, 129},
	{168, 128},
	{172, 104},
	{172, 103},
	{170, 73},
	{169, 71},
	{168, 67},
	{167, 61},
	{165, 56},
	{164, 54},
	{163, 51},
	{162, 48},
	{161, 46},
	{161, 46},
	{159, 44},
	{159, 42},
	{158, 42},
	{156, 37},
	{153, 34},
	{147, 26},
	{147, 25},
	{147, 25},
	{145, 23},
	{134, 14},
	{133, 14},
	{131, 12},
	{130, 12},
	{128, 10},
	{126, 10},
	{125, 9},
	{123, 9},
	{122, 8},
	{120, 7},
	{112, 5},
	{104, 3}
};
const Point R_contour1_points[] MEM_TYPE = {
	{3, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{34, 7},
	{36, 9},
	{37, 9},
	{43, 179},
	{36, 186},
	{34, 188},
	{28, 190},
	{21, 192},
	{18, 193},
	{3, 193}
};
const Point R_contour2_points[] MEM_TYPE = {
	{36, 186},
	{37, 186},
	{43, 180},
	{49, 186},
	{53, 189},
	{54, 189},
	{56, 190},
	{57, 190},
	{64, 192},
	{68, 193},
	{82, 193}
};
const Point R_contour3_points[] MEM_TYPE = {
	{43, 180},
	{43, 100},
	{82, 99},
	{84, 100},
	{86, 100},
	{87, 101},
	{90, 101},
	{91, 102},
	{93, 103},
	{95, 109},
	{95, 111},
	{105, 123},
	{115, 137},
	{127, 152},
	{137, 165},
	{149, 181},
	{151, 184},
	{153, 186},
	{171, 191},
	{178, 192},
	{189, 193}
};
const Point R_contour4_points[] MEM_TYPE = {
	{93, 103},
	{94, 103},
	{98, 96},
	{98, 96},
	{105, 94},
	{106, 93},
	{107, 93},
	{108, 92},
	{109, 92},
	{111, 92},
	{112, 90},
	{116, 88},
	{117, 87},
	{121, 84},
	{122, 84},
	{122, 84},
	{122, 83},
	{123, 83},
	{123, 82},
	{124, 82},
	{125, 81},
	{128, 76},
	{131, 70},
	{132, 68},
	{133, 65},
	{134, 56},
	{135, 55},
	{135, 47},
	{133, 38},
	{132, 37},
	{132, 34},
	{130, 31},
	{129, 30},
	{129, 29},
	{128, 28},
	{128, 26},
	{123, 20},
	{122, 18},
	{121, 18},
	{120, 17},
	{120, 17},
	{115, 13},
	{110, 10},
	{109, 10},
	{108, 9},
	{104, 9},
	{103, 8},
	{93, 6},
	{64, 6},
	{51, 7},
	{50, 8},
	{42, 15}
};
const Point S_contour1_points[] MEM_TYPE = {
	{109, 0},
	{108, 6},
	{107, 9},
	{106, 11},
	{104, 14},
	{102, 16},
	{96, 15},
	{90, 13},
	{86, 12},
	{84, 10},
	{82, 10},
	{79, 9},
	{78, 8},
	{76, 7},
	{71, 6},
	{63, 4},
	{49, 4},
	{42, 5},
	{38, 6},
	{34, 9},
	{32, 10},
	{31, 10},
	{27, 13},
	{21, 19},
	{20, 21},
	{18, 25},
	{17, 29},
	{14, 48},
	{14, 49},
	{14, 50},
	{15, 55},
	{15, 57},
	{16, 58},
	{17, 60},
	{17, 61},
	{21, 66},
	{28, 73},
	{34, 78},
	{37, 81},
	{39, 81},
	{42, 84},
	{43, 84},
	{45, 86},
	{48, 87},
	{50, 88},
	{51, 89},
	{53, 90},
	{55, 91},
	{57, 92},
	{64, 96},
	{66, 97},
	{71, 100},
	{73, 101},
	{76, 103},
	{78, 104},
	{79, 104},
	{81, 106},
	{82, 106},
	{93, 114},
	{101, 121},
	{103, 124},
	{104, 125},
	{105, 127},
	{107, 131},
	{109, 140},
	{110, 140},
	{110, 148},
	{107, 161},
	{107, 164},
	{106, 165},
	{106, 167},
	{105, 167},
	{104, 171},
	{100, 176},
	{93, 183},
	{92, 184},
	{90, 185},
	{90, 185},
	{88, 187},
	{87, 187},
	{86, 187},
	{84, 188},
	{82, 189},
	{74, 191},
	{70, 192},
	{52, 192},
	{44, 190},
	{40, 189},
	{39, 189},
	{35, 187},
	{34, 187},
	{32, 186},
	{30, 186},
	{29, 185},
	{20, 183},
	{16, 181},
	{15, 181},
	{14, 176},
	{12, 172},
	{10, 164},
	{8, 151},
	{6, 136}
};
const Point S_contour2_points[] MEM_TYPE = {
	{101, 16},
	{101, 16},
	{103, 17},
	{103, 21},
	{107, 42},
	{109, 57}
};
const Point T_contour1_points[] MEM_TYPE = {
	{17, 7},
	{12, 7},
	{11, 8},
	{9, 8},
	{8, 9},
	{7, 11},
	{7, 12},
	{6, 14},
	{4, 22},
	{3, 23},
	{1, 37},
	{0, 42}
};
const Point T_contour2_points[] MEM_TYPE = {
	{17, 7},
	{73, 7},
	{81, 15},
	{81, 179},
	{75, 186},
	{71, 189},
	{68, 190},
	{60, 192},
	{56, 193},
	{42, 193}
};
const Point T_contour3_points[] MEM_TYPE = {
	{73, 187},
	{75, 186},
	{76, 186},
	{81, 180},
	{87, 186},
	{91, 189},
	{94, 190},
	{103, 192},
	{106, 193},
	{120, 193}
};
const Point T_contour4_points[] MEM_TYPE = {
	{81, 15},
	{90, 7},
	{145, 7},
	{151, 7},
	{153, 8},
	{154, 10},
	{155, 12},
	{156, 14},
	{156, 15},
	{157, 17},
	{159, 23},
	{159, 26},
	{160, 28},
	{161, 37},
	{162, 40},
	{162, 42}
};
const Point T_contour5_points[] MEM_TYPE = {
	{145, 7},
	{89, 7},
	{81, 15}
};
const Point U_contour1_points[] MEM_TYPE = {
	{3, 1},
	{18, 2},
	{25, 3},
	{28, 4},
	{34, 7},
	{36, 9},
	{37, 9},
	{43, 125},
	{45, 145},
	{46, 153},
	{47, 154},
	{48, 156},
	{48, 158},
	{50, 160},
	{50, 161},
	{51, 162},
	{51, 163},
	{51, 164},
	{51, 165},
	{53, 167},
	{54, 168},
	{58, 173},
	{58, 174},
	{59, 174},
	{60, 175},
	{60, 176},
	{67, 181},
	{68, 182},
	{69, 182},
	{71, 183},
	{73, 184},
	{73, 184},
	{77, 186},
	{78, 186},
	{82, 187},
	{98, 190},
	{114, 190},
	{122, 190},
	{134, 187},
	{136, 187},
	{137, 186},
	{139, 186},
	{140, 185},
	{142, 184},
	{146, 182},
	{155, 175},
	{156, 175},
	{164, 167},
	{164, 165},
	{165, 164},
	{167, 159},
	{168, 158},
	{169, 155},
	{171, 149},
	{173, 136},
	{173, 13},
	{174, 12},
	{174, 10},
	{173, 10},
	{173, 9},
	{174, 7},
	{178, 6},
	{179, 5},
	{181, 4},
	{185, 3},
	{195, 2},
	{204, 1}
};
const Point U_contour2_points[] MEM_TYPE = {
	{175, 7},
	{174, 7},
	{173, 7},
	{168, 5},
	{162, 3},
	{159, 3},
	{143, 1}
};
const Point U_contour3_points[] MEM_TYPE = {
	{43, 15},
	{49, 9},
	{51, 7},
	{57, 5},
	{61, 4},
	{63, 3},
	{66, 3},
	{82, 1}
};
const Point V_contour1_points[] MEM_TYPE = {
	{0, 1},
	{2, 1},
	{11, 2},
	{17, 3},
	{20, 4},
	{21, 5},
	{23, 6},
	{31, 10},
	{33, 11},
	{39, 14},
	{41, 27},
	{42, 28},
	{44, 35},
	{45, 37},
	{45, 39},
	{46, 40},
	{46, 42},
	{48, 44},
	{48, 46},
	{50, 48},
	{50, 50},
	{51, 53},
	{52, 54},
	{53, 57},
	{54, 59},
	{55, 61},
	{56, 63},
	{56, 64},
	{57, 66},
	{58, 68},
	{59, 70},
	{60, 73},
	{61, 75},
	{62, 77},
	{62, 79},
	{64, 81},
	{64, 83},
	{65, 86},
	{66, 87},
	{67, 89},
	{67, 90},
	{68, 93},
	{69, 95},
	{70, 97},
	{71, 99},
	{72, 101},
	{73, 103},
	{74, 106},
	{75, 107},
	{76, 110},
	{76, 112},
	{78, 114},
	{78, 116},
	{79, 117},
	{79, 119},
	{81, 122},
	{81, 123},
	{82, 126},
	{83, 128},
	{84, 130},
	{85, 132},
	{86, 134},
	{87, 136},
	{88, 139},
	{89, 140},
	{90, 143},
	{90, 145},
	{91, 146},
	{92, 148},
	{93, 150},
	{93, 152},
	{95, 156},
	{96, 156},
	{96, 156},
	{98, 158},
	{98, 158},
	{98, 159},
	{98, 161},
	{98, 162},
	{98, 162},
	{98, 192}
};
const Point V_contour2_points[] MEM_TYPE = {
	{98, 158},
	{102, 155},
	{104, 154},
	{107, 152},
	{109, 151},
	{111, 150},
	{112, 149},
	{112, 147},
	{114, 145},
	{114, 143},
	{115, 142},
	{115, 140},
	{116, 139},
	{117, 137},
	{117, 136},
	{118, 134},
	{118, 132},
	{119, 131},
	{120, 129},
	{120, 128},
	{121, 126},
	{122, 125},
	{122, 123},
	{123, 122},
	{123, 120},
	{124, 118},
	{125, 116},
	{126, 114},
	{126, 113},
	{127, 111},
	{128, 110},
	{128, 108},
	{129, 107},
	{129, 105},
	{130, 104},
	{131, 102},
	{132, 100},
	{132, 98},
	{133, 96},
	{134, 95},
	{134, 93},
	{135, 92},
	{136, 90},
	{136, 89},
	{137, 87},
	{137, 86},
	{138, 84},
	{139, 82},
	{140, 80},
	{140, 78},
	{141, 77},
	{142, 75},
	{142, 74},
	{143, 72},
	{143, 71},
	{144, 69},
	{145, 68},
	{145, 66},
	{147, 64},
	{147, 62},
	{148, 61},
	{148, 59},
	{149, 57},
	{150, 56},
	{150, 54},
	{151, 53},
	{151, 51},
	{152, 50},
	{153, 48},
	{153, 46},
	{154, 44},
	{155, 42},
	{156, 41},
	{156, 39},
	{157, 38},
	{158, 34},
	{159, 33},
	{161, 28},
	{161, 26},
	{164, 14},
	{164, 10},
	{165, 10},
	{165, 9},
	{166, 7},
	{168, 7},
	{170, 6},
	{171, 6},
	{177, 4},
	{184, 3},
	{190, 2}
};
const Point V_contour3_points[] MEM_TYPE = {
	{39, 14},
	{48, 6},
	{48, 6},
	{50, 4},
	{55, 3},
	{59, 3},
	{68, 2},
	{70, 1}
};
const Point W_contour1_points[] MEM_TYPE = {
	{1, 1},
	{2, 1},
	{8, 2},
	{14, 3},
	{19, 5},
	{28, 10},
	{30, 11},
	{31, 12},
	{34, 13},
	{35, 14},
	{35, 15},
	{37, 28},
	{39, 34},
	{40, 39},
	{40, 40},
	{41, 42},
	{44, 51},
	{45, 52},
	{46, 56},
	{46, 57},
	{48, 61},
	{48, 62},
	{50, 65},
	{50, 67},
	{52, 72},
	{53, 73},
	{54, 79},
	{55, 80},
	{57, 87},
	{58, 89},
	{59, 92},
	{60, 93},
	{63, 103},
	{64, 104},
	{67, 115},
	{68, 116},
	{70, 123},
	{71, 125},
	{72, 128},
	{73, 129},
	{74, 133},
	{75, 134},
	{76, 138},
	{76, 139},
	{78, 143},
	{78, 144},
	{79, 145},
	{79, 146},
	{81, 147},
	{82, 192}
};
const Point W_contour2_points[] MEM_TYPE = {
	{82, 148},
	{83, 147},
	{86, 146},
	{87, 145},
	{89, 144},
	{90, 143},
	{92, 142},
	{93, 141},
	{96, 140},
	{96, 140},
	{98, 133},
	{99, 132},
	{101, 125},
	{102, 123},
	{105, 114},
	{106, 113},
	{109, 104},
	{109, 103},
	{112, 95},
	{112, 94},
	{115, 85},
	{116, 84},
	{119, 75},
	{120, 73},
	{120, 71},
	{121, 70},
	{124, 68},
	{126, 67},
	{127, 67},
	{129, 65},
	{134, 61},
	{136, 62},
	{136, 62},
	{139, 65},
	{139, 68},
	{140, 69},
	{141, 73},
	{142, 74},
	{143, 78},
	{143, 79},
	{145, 84},
	{146, 86},
	{147, 89},
	{148, 90},
	{149, 94},
	{150, 95},
	{151, 99},
	{151, 100},
	{153, 104},
	{153, 105},
	{154, 109},
	{155, 110},
	{156, 114},
	{157, 115},
	{158, 118},
	{159, 120},
	{160, 123},
	{161, 125},
	{162, 128},
	{162, 129},
	{164, 133},
	{164, 134},
	{165, 138},
	{166, 139},
	{167, 143},
	{168, 144},
	{169, 148},
	{170, 149},
	{170, 150},
	{171, 150},
	{172, 151},
	{173, 152},
	{172, 153},
	{173, 154},
	{172, 156},
	{172, 156},
	{173, 192}
};
const Point W_contour3_points[] MEM_TYPE = {
	{172, 151},
	{174, 150},
	{176, 148},
	{178, 147},
	{180, 146},
	{181, 145},
	{183, 144},
	{184, 143},
	{185, 143},
	{187, 141},
	{189, 136},
	{189, 135},
	{195, 118},
	{195, 117},
	{201, 101},
	{201, 100},
	{206, 85},
	{207, 84},
	{212, 67},
	{213, 66},
	{219, 50},
	{219, 48},
	{226, 28},
	{226, 25},
	{227, 23},
	{229, 10},
	{229, 8},
	{236, 5},
	{239, 4},
	{245, 3},
	{255, 2}
};
const Point W_contour4_points[] MEM_TYPE = {
	{134, 62},
	{133, 61},
	{131, 45},
	{128, 35},
	{128, 33},
	{127, 32},
	{125, 16},
	{124, 15},
	{132, 7},
	{134, 6},
	{135, 6},
	{137, 5},
	{138, 4},
	{142, 3},
	{146, 3},
	{156, 1}
};
const Point W_contour5_points[] MEM_TYPE = {
	{134, 6},
	{134, 6},
	{132, 7},
	{124, 15},
	{121, 13},
	{119, 12},
	{117, 10},
	{115, 9},
	{107, 6},
	{105, 5},
	{104, 4},
	{100, 3},
	{96, 3},
	{87, 1}
};
const Point W_contour6_points[] MEM_TYPE = {
	{35, 14},
	{43, 6},
	{46, 4},
	{51, 3},
	{54, 3},
	{62, 1}
};
const Point X_contour1_points[] MEM_TYPE = {
	{4, 1},
	{7, 1},
	{17, 2},
	{29, 4},
	{34, 6},
	{35, 7},
	{37, 7},
	{39, 8},
	{40, 9},
	{42, 9},
	{43, 10},
	{45, 10},
	{46, 11},
	{49, 12},
	{51, 13},
	{52, 14},
	{54, 23},
	{56, 25},
	{56, 26},
	{57, 28},
	{58, 31},
	{61, 34},
	{62, 36},
	{63, 38},
	{64, 39},
	{67, 45},
	{68, 46},
	{79, 62},
	{79, 64},
	{90, 80},
	{91, 81},
	{93, 85},
	{93, 86},
	{97, 87},
	{98, 87},
	{99, 89},
	{99, 98},
	{90, 106},
	{89, 107},
	{88, 107},
	{76, 123},
	{68, 134},
	{54, 151},
	{46, 162},
	{38, 174},
	{37, 175},
	{37, 176},
	{36, 178},
	{35, 182},
	{34, 185},
	{34, 186},
	{32, 187},
	{19, 191},
	{6, 193},
	{0, 193}
};
const Point X_contour2_points[] MEM_TYPE = {
	{38, 173},
	{43, 167},
	{51, 156},
	{68, 134},
	{75, 125}
};
const Point X_contour3_points[] MEM_TYPE = {
	{90, 106},
	{91, 106},
	{99, 98},
	{101, 100},
	{102, 100},
	{103, 100},
	{109, 108},
	{109, 109},
	{118, 122},
	{118, 123},
	{128, 138},
	{129, 139},
	{137, 152},
	{138, 153},
	{145, 164},
	{147, 167},
	{147, 169},
	{148, 170},
	{150, 180},
	{151, 181},
	{141, 190},
	{139, 191},
	{135, 192},
	{120, 193}
};
const Point X_contour4_points[] MEM_TYPE = {
	{139, 191},
	{140, 191},
	{142, 190},
	{151, 181},
	{151, 181},
	{153, 182},
	{157, 184},
	{159, 184},
	{161, 186},
	{163, 186},
	{164, 187},
	{180, 192},
	{188, 193},
	{196, 193}
};
const Point X_contour5_points[] MEM_TYPE = {
	{99, 98},
	{99, 89},
	{107, 81},
	{108, 81},
	{109, 80},
	{110, 80},
	{129, 55},
	{148, 29},
	{149, 28},
	{151, 25},
	{152, 23},
	{152, 23},
	{153, 21},
	{153, 20},
	{154, 19},
	{156, 12},
	{156, 12},
	{156, 10},
	{158, 8},
	{161, 7},
	{162, 7},
	{167, 6},
	{173, 4},
	{181, 3},
	{189, 2}
};
const Point X_contour6_points[] MEM_TYPE = {
	{53, 14},
	{62, 5},
	{65, 4},
	{67, 3},
	{70, 3},
	{84, 1}
};
const Point Y_contour1_points[] MEM_TYPE = {
	{1, 1},
	{3, 1},
	{14, 3},
	{19, 4},
	{23, 5},
	{27, 6},
	{28, 7},
	{30, 7},
	{34, 9},
	{35, 10},
	{40, 12},
	{42, 13},
	{43, 14},
	{44, 15},
	{45, 21},
	{46, 24},
	{47, 26},
	{48, 28},
	{49, 30},
	{50, 32},
	{51, 33},
	{52, 35},
	{53, 36},
	{54, 38},
	{54, 39},
	{56, 41},
	{56, 42},
	{57, 44},
	{58, 45},
	{59, 47},
	{61, 50},
	{62, 51},
	{62, 53},
	{64, 54},
	{65, 57},
	{66, 59},
	{67, 60},
	{68, 62},
	{69, 64},
	{70, 66},
	{71, 67},
	{72, 69},
	{73, 71},
	{75, 73},
	{75, 75},
	{76, 76},
	{77, 78},
	{78, 79},
	{79, 81},
	{80, 82},
	{81, 84},
	{82, 86},
	{82, 87},
	{84, 89},
	{84, 90},
	{86, 92},
	{86, 93},
	{87, 95},
	{89, 97},
	{90, 99},
	{90, 100},
	{91, 105},
	{92, 106},
	{92, 107},
	{95, 111},
	{95, 179},
	{87, 187},
	{86, 188},
	{80, 190},
	{73, 192},
	{70, 193},
	{56, 193}
};
const Point Y_contour2_points[] MEM_TYPE = {
	{87, 187},
	{88, 187},
	{95, 180},
	{100, 186},
	{104, 189},
	{106, 189},
	{116, 192},
	{120, 193},
	{134, 193}
};
const Point Y_contour3_points[] MEM_TYPE = {
	{95, 111},
	{104, 101},
	{105, 101},
	{108, 100},
	{109, 100},
	{110, 98},
	{111, 96},
	{113, 93},
	{114, 92},
	{116, 88},
	{117, 87},
	{120, 81},
	{121, 80},
	{123, 76},
	{124, 75},
	{128, 70},
	{128, 68},
	{131, 65},
	{131, 64},
	{135, 58},
	{136, 57},
	{138, 53},
	{139, 52},
	{141, 48},
	{142, 47},
	{143, 45},
	{143, 44},
	{145, 42},
	{145, 41},
	{147, 39},
	{147, 38},
	{151, 32},
	{151, 31},
	{153, 29},
	{156, 22},
	{156, 21},
	{158, 20},
	{160, 10},
	{160, 9},
	{161, 8},
	{162, 8},
	{178, 3},
	{191, 2},
	{193, 1}
};
const Point Y_contour4_points[] MEM_TYPE = {
	{44, 14},
	{53, 5},
	{54, 5},
	{55, 4},
	{58, 3},
	{61, 3},
	{75, 1}
};
const Point Z_contour1_points[] MEM_TYPE = {
	{166, 1},
	{165, 2},
	{163, 3},
	{161, 4},
	{159, 4},
	{158, 5},
	{156, 6},
	{153, 7},
	{151, 7},
	{149, 9},
	{147, 9},
	{146, 10},
	{144, 10},
	{142, 12},
	{140, 12},
	{139, 13},
	{138, 14},
	{131, 6},
	{40, 7},
	{32, 8},
	{31, 9},
	{29, 12},
	{29, 13},
	{28, 15},
	{26, 20},
	{26, 21},
	{24, 28},
	{21, 45}
};
const Point Z_contour2_points[] MEM_TYPE = {
	{138, 14},
	{138, 14},
	{136, 21},
	{136, 21},
	{136, 23},
	{129, 32},
	{121, 44},
	{113, 56},
	{105, 67},
	{97, 79},
	{89, 90},
	{81, 102},
	{73, 114},
	{65, 125},
	{57, 137},
	{50, 148},
	{42, 160},
	{34, 172},
	{34, 172},
	{31, 181},
	{29, 183},
	{27, 183},
	{25, 184},
	{23, 185},
	{20, 186},
	{18, 187},
	{17, 187},
	{15, 188},
	{13, 189},
	{11, 190},
	{9, 191},
	{7, 192},
	{5, 193}
};
const Point Z_contour3_points[] MEM_TYPE = {
	{30, 182},
	{31, 182},
	{137, 189},
	{151, 187},
	{152, 187},
	{153, 187},
	{154, 186},
	{155, 184},
	{156, 183},
	{158, 180},
	{158, 179},
	{160, 174},
	{161, 173},
	{161, 172},
	{162, 170},
	{162, 168},
	{164, 166},
	{164, 164},
	{165, 162},
	{165, 161},
	{166, 158},
	{167, 156},
	{167, 154},
	{168, 149},
	{169, 148},
	{169, 147},
	{168, 148}
};

const Contour A_contours[] MEM_TYPE = {
	{A_contour1_points, 65},
	{A_contour2_points, 42},
	{A_contour3_points, 12},
	{A_contour4_points, 43}
};
const Contour B_contours[] MEM_TYPE = {
	{B_contour1_points, 14},
	{B_contour2_points, 100}
};
const Contour C_contours[] MEM_TYPE = {
	{C_contour1_points, 108},
	{C_contour2_points, 17}
};
const Contour D_contours[] MEM_TYPE = {
	{D_contour1_points, 14},
	{D_contour2_points, 82}
};
const Contour E_contours[] MEM_TYPE = {
	{E_contour1_points, 14},
	{E_contour2_points, 32},
	{E_contour3_points, 9},
	{E_contour4_points, 7},
	{E_contour5_points, 15}
};
const Contour F_contours[] MEM_TYPE = {
	{F_contour1_points, 14},
	{F_contour2_points, 11},
	{F_contour3_points, 12},
	{F_contour4_points, 6},
	{F_contour5_points, 16}
};
const Contour G_contours[] MEM_TYPE = {
	{G_contour1_points, 129},
	{G_contour2_points, 8},
	{G_contour3_points, 15}
};
const Contour H_contours[] MEM_TYPE = {
	{H_contour1_points, 14},
	{H_contour2_points, 11},
	{H_contour3_points, 10},
	{H_contour4_points, 11},
	{H_contour5_points, 8},
	{H_contour6_points, 10},
	{H_contour7_points, 2},
	{H_contour8_points, 2},
	{H_contour9_points, 8}
};
const Contour I_contours[] MEM_TYPE = {
	{I_contour1_points, 14},
	{I_contour2_points, 11},
	{I_contour3_points, 8}
};
const Contour J_contours[] MEM_TYPE = {
	{J_contour1_points, 35},
	{J_contour2_points, 7}
};
const Contour K_contours[] MEM_TYPE = {
	{K_contour1_points, 14},
	{K_contour2_points, 11},
	{K_contour3_points, 14},
	{K_contour4_points, 8},
	{K_contour5_points, 18},
	{K_contour6_points, 5},
	{K_contour7_points, 8}
};
const Contour L_contours[] MEM_TYPE = {
	{L_contour1_points, 14},
	{L_contour2_points, 29},
	{L_contour3_points, 8}
};
const Contour M_contours[] MEM_TYPE = {
	{M_contour1_points, 16},
	{M_contour2_points, 6},
	{M_contour3_points, 113},
	{M_contour4_points, 10},
	{M_contour5_points, 10}
};
const Contour N_contours[] MEM_TYPE = {
	{N_contour1_points, 35},
	{N_contour2_points, 15},
	{N_contour3_points, 6},
	{N_contour4_points, 3},
	{N_contour5_points, 5},
	{N_contour6_points, 10},
	{N_contour7_points, 6}
};
const Contour O_contours[] MEM_TYPE = {
	{O_contour1_points, 131}
};
const Contour P_contours[] MEM_TYPE = {
	{P_contour1_points, 14},
	{P_contour2_points, 11},
	{P_contour3_points, 52}
};
const Contour Q_contours[] MEM_TYPE = {
	{Q_contour1_points, 98},
	{Q_contour2_points, 10},
	{Q_contour3_points, 66}
};
const Contour R_contours[] MEM_TYPE = {
	{R_contour1_points, 14},
	{R_contour2_points, 11},
	{R_contour3_points, 21},
	{R_contour4_points, 52}
};
const Contour S_contours[] MEM_TYPE = {
	{S_contour1_points, 102},
	{S_contour2_points, 6}
};
const Contour T_contours[] MEM_TYPE = {
	{T_contour1_points, 12},
	{T_contour2_points, 10},
	{T_contour3_points, 10},
	{T_contour4_points, 16},
	{T_contour5_points, 3}
};
const Contour U_contours[] MEM_TYPE = {
	{U_contour1_points, 67},
	{U_contour2_points, 7},
	{U_contour3_points, 8}
};
const Contour V_contours[] MEM_TYPE = {
	{V_contour1_points, 81},
	{V_contour2_points, 90},
	{V_contour3_points, 8}
};
const Contour W_contours[] MEM_TYPE = {
	{W_contour1_points, 50},
	{W_contour2_points, 77},
	{W_contour3_points, 31},
	{W_contour4_points, 16},
	{W_contour5_points, 14},
	{W_contour6_points, 6}
};
const Contour X_contours[] MEM_TYPE = {
	{X_contour1_points, 55},
	{X_contour2_points, 5},
	{X_contour3_points, 24},
	{X_contour4_points, 14},
	{X_contour5_points, 25},
	{X_contour6_points, 6}
};
const Contour Y_contours[] MEM_TYPE = {
	{Y_contour1_points, 72},
	{Y_contour2_points, 9},
	{Y_contour3_points, 44},
	{Y_contour4_points, 7}
};
const Contour Z_contours[] MEM_TYPE = {
	{Z_contour1_points, 28},
	{Z_contour2_points, 33},
	{Z_contour3_points, 27}
};

const Letter letters[] MEM_TYPE = {
	{'A', A_contours, 4},
	{'B', B_contours, 2},
	{'C', C_contours, 2},
	{'D', D_contours, 2},
	{'E', E_contours, 5},
	{'F', F_contours, 5},
	{'G', G_contours, 3},
	{'H', H_contours, 9},
	{'I', I_contours, 3},
	{'J', J_contours, 2},
	{'K', K_contours, 7},
	{'L', L_contours, 3},
	{'M', M_contours, 5},
	{'N', N_contours, 7},
	{'O', O_contours, 1},
	{'P', P_contours, 3},
	{'Q', Q_contours, 3},
	{'R', R_contours, 4},
	{'S', S_contours, 2},
	{'T', T_contours, 5},
	{'U', U_contours, 3},
	{'V', V_contours, 3},
	{'W', W_contours, 6},
	{'X', X_contours, 6},
	{'Y', Y_contours, 4},
	{'Z', Z_contours, 3}
};

#define MaxYSize 245
//END LETTERS
// The above comment is required for parsing. Everything after here is left as is.


const int letterCount = sizeof(letters) / sizeof(letters[0]);

// The method of retrival for AVR characters in mem vs SAMD chars is different too
#ifdef __AVR__

  // If AVR, we have to build the character from progmem and return the pointer

  // The code here is going to be super complicated
  // Basically, the Letter object is stored somewhere and we have to read it, then rebuilt it as an object
  // Before we can rebuilt it, we have to allocate space for it in the SRAM of the arduino
  // But if we do this over and over, it will fill up all the arduino's SRAM (called memory leaking)
  // So we need to free up the old space that we took up, before adding more to SRAM.

  #include <avr/pgmspace.h>

  // Place to save pointer so we know what to deallocate later
  Letter* allocatedSpace = nullptr;

  void freeLetter(Letter* letter) {
      if (letter == nullptr) return;

      // Free each contour's points array
      for (uint8_t i = 0; i < letter->contourCount; i++) {
          if (letter->contours[i].points != nullptr) {
              free(letter->contours[i].points);
          }
      }

      // Free the contours array
      if (letter->contours != nullptr) {
          free(letter->contours);
      }

      // Finally, free the letter object itself
      free(letter);
  }


  // This method retrives the letter from PROMEM space, stores it in SRAM and returns a pointer.
  Letter* getLetter(char c) {
    // First, free up old space
    if (allocatedSpace != nullptr) {
      // Serial.println("FREEING:");
      // Serial.println(allocatedSpace->letter);
      freeLetter(allocatedSpace);
      allocatedSpace = nullptr; // use after free go brrrrrr
    }

    // Loop through the letters stored in PROGMEM
    for (const Letter& letter : letters) {
      char thisLetter = (char) pgm_read_byte(&letter.letter);

      if (thisLetter == c) {
        // Allocate memory for the Letter object in SRAM
        Letter* sramLetter = (Letter*)malloc(sizeof(Letter));
        sramLetter->letter = thisLetter;

        // Get the contour count from PROGMEM so we know how many we're looking for
        uint8_t contourCount = pgm_read_byte(&letter.contourCount);
        sramLetter->contourCount = contourCount;

        // Allocate memory for the contours array in SRAM
        sramLetter->contours = (Contour*)malloc(contourCount * sizeof(Contour));

        // Get the contours pointer from PROGMEM
        Contour* contours = (Contour*)pgm_read_ptr(&letter.contours);

        // Copy each contour
        for (uint8_t i = 0; i < contourCount; i++) {
          // Get the point count for this contour from PROGMEM
          uint8_t pointCount = pgm_read_byte(&contours[i].pointCount);
          sramLetter->contours[i].pointCount = pointCount;

          // Allocate memory for the points array in SRAM
          sramLetter->contours[i].points = (Point*)malloc(pointCount * sizeof(Point));

          // Get the points pointer from PROGMEM
          Point* points = (Point*)pgm_read_ptr(&contours[i].points);

          // Copy each point
          for (uint8_t j = 0; j < pointCount; j++) {
            sramLetter->contours[i].points[j].x = pgm_read_byte(&points[j].x);
            sramLetter->contours[i].points[j].y = pgm_read_byte(&points[j].y);
          }
        }

        // Log letter for freeing later
        allocatedSpace = sramLetter;

        // Return the pointer to the Letter object stored in SRAM
        return sramLetter;
      }
    }

    // Return nullptr if the letter wasn't found
    return nullptr;
  }

#else
  // If SAMD, we can simply return the pointer, everything with extracting from progmem is handled automatically for const data
  const Letter* getLetter(char letter) {
      for (int i = 0; i < letterCount; ++i) {
          if (letters[i].letter == letter) {
              return &letters[i];
          }
      }
      return nullptr;
  }
#endif




// TODO: 
// Figure out how to know how far to move to the next letter...
//    Probably inject furthest point into Letter struct
// Char width multiplier

// NOTES:
// y motor covers ground 3.5x slower than x
// Each letter has 1150 x steps between them


// Allow easy-disable debugging (saves about 1% more storage and mem)
#define DEBUG 0
#define DEBUG_StraightToPrint 0
#define DEBUG_SpeedBoost 0

// If debug is true, we'll define the Serial.print feature, otherwise don't compile print statements.
#if DEBUG
#define DEBUG_PRINT(x)  Serial.print(x)
#define DEBUG_PRINTLN(x) Serial.println(x)
#else
#define DEBUG_PRINT(x)
#define DEBUG_PRINTLN(x)
#endif

#include <Wire.h>
#include <LiquidCrystal_I2C.h>
#include <Stepper.h>
#include <ezButton.h>
#include <Servo.h>

// Allow sending code over wifi if it's a Nano IoT 33
#if defined(ARDUINO_SAMD_NANO_33_IOT)
  #include "secrets.h"
  #include <WiFiNINA.h>
  #include <ArduinoOTA.h>
  const char ssid[] = SECRET_SSID;
  const char pass[] = SECRET_PASS;
  int status = WL_IDLE_STATUS;
#endif


LiquidCrystal_I2C lcd(0x27, 16, 2);  // Set the LCD address to 0x27 for a 16x2 display

ezButton button1(14);
#define INIT_MSG "Initializing..."
#define MODE_NAME "   LABELMAKER   "
#define PRINT_CONF "  PRINT LABEL?  "
#define PRINTING "    PRINTING    "
#define MENU_CLEAR ":                "


//text variables
const int x_scale = 230;  //these are multiplied against the stored coordinate (between 0 and 4) to get the actual number of steps moved
const int y_scale = 230;  //for example, if this is 230(default), then 230(scale) x 4(max coordinate) = 920 (motor steps)
const int scale = x_scale;


// const int space = 230 * 5;
const int space = 70; // My comment: our "space" is according to a 255x255 scale, since it is scaled up at the line function now instead of in the plot char function. 

const int letterWidth = 920;

// Joystick setup
const int joystickXPin = A2;
const int joystickYPin = A1;
const int joystickButtonThreshold = 200;

// Menu parameters
const char alphabet[] = "_ABCDEFGHIJKLMNOPQRSTUVWXYZ";  //alphabet menu
const int alphabetSize = sizeof(alphabet) - 1;

#if DEBUG_StraightToPrint
  String text = "TIMES";
#else
  String text;
#endif

int currentCharacter = 0;
int cursorPosition = 0;
int currentPage = 0;
const int charactersPerPage = 16;

// Stepper motor parameters
const int stepCount = 200;
const int stepsPerRevolution = 2048;

// initialize the stepper library for both steppers:
Stepper xStepper(stepsPerRevolution, 6, 8, 7, 9);
Stepper yStepper(stepsPerRevolution, 2, 4, 3, 5);

const int xPins[4] = { 6, 8, 7, 9 };
const int yPins[4] = { 2, 4, 3, 5 };

//Servo
const int SERVO_PIN = 13;
Servo servo;
int angle = 30;

enum State { MainMenu,
             Editing,
             PrintConfirmation,
             Printing };

#if DEBUG_StraightToPrint
  State currentState = Printing;
#else
  State currentState = MainMenu;
#endif
State prevState = Printing;

enum jState { LEFT,
              RIGHT,
              UP,
              DOWN,
              MIDDLE,
              UPRIGHT,
              UPLEFT,
              DOWNRIGHT,
              DOWNLEFT };
jState joyState = MIDDLE;
jState prevJoyState = MIDDLE;

boolean pPenOnPaper = false;  // pen on paper in previous cycle
int lineCount = 0;

int xpos = 0;
int ypos = 0;
const int posS = 2;
const int posM = 7;
const int posL = 12;
bool joyUp;
bool joyDown;
bool joyLeft;
bool joyRight;
int button1State;
int joystickX;
int joystickY;

void printLetter(char c) {
  const Letter* letterA = getLetter(c);
  if (letterA != nullptr) {
      for (int i = 0; i < letterA->contourCount; ++i) {
          const Contour& contour = letterA->contours[i];
          Serial.print("Contour ");
          Serial.print(i);
          Serial.println(":");
          for (int j = 0; j < contour.pointCount; ++j) {
              const Point& point = contour.points[j];
              Serial.print("Point ");
              Serial.print(j);
              Serial.print(": (");
              Serial.print(point.x);
              Serial.print(", ");
              Serial.print(point.y);
              Serial.println(")");
          }
      }
  } else {
      DEBUG_PRINTLN("Letter not found");
  }
}

void setup() {
  #if DEBUG
    pinMode(LED_BUILTIN, OUTPUT);
    Serial.begin(9600);
    while(!Serial) {
      digitalWrite(LED_BUILTIN, HIGH);
      delay(250);
      digitalWrite(LED_BUILTIN, LOW);
      delay(250);
    }
    digitalWrite(LED_BUILTIN, LOW);
  #endif

  // printLetter('A');
  // while(true){};

  lcd.init();
  lcd.backlight();

  // Some of my code for updating over wifi while building
  #if defined(ARDUINO_SAMD_NANO_33_IOT)
    lcd.setCursor(0, 0);
    lcd.print("wifi...");
    while ( status != WL_CONNECTED) {
      DEBUG_PRINT("Attempting to connect to SSID: ");
      DEBUG_PRINTLN(ssid);
      status = WiFi.begin(ssid, pass);
    }
    ArduinoOTA.begin(WiFi.localIP(), "Arduino", "SecurePassword", InternalStorage);
  #endif

  lcd.setCursor(0, 0);
  lcd.print(INIT_MSG);

  pinMode(LED_BUILTIN, OUTPUT);

  button1.setDebounceTime(50);

  servo.attach(SERVO_PIN);
  servo.write(angle);

  penDown(false);  //servo to tape surface so pen can be inserted

  // set the speed of the motors
  #if DEBUG_StraightToPrint
    yStepper.setSpeed(12*1.3);
    xStepper.setSpeed(10*1.3);
  #else
    yStepper.setSpeed(12);  // set first stepper speed (these should stay the same)
    xStepper.setSpeed(10);  // set second stepper speed (^ weird stuff happens when you push it too fast)
  #endif

  penUp();      //ensure that the servo is lifting the pen carriage away from the tape
  homeYAxis();  //lower the Y axis all the way to the bottom

  ypos = 0;
  xpos = 0;

  releaseMotors();
  lcd.clear();
}

void loop() {
  #if defined(ARDUINO_SAMD_NANO_33_IOT)
    ArduinoOTA.poll();
  #endif

  button1.loop();
  button1State = button1.getState();

  joystickX = analogRead(joystickXPin);
  joystickY = analogRead(joystickYPin);
  joyUp = joystickY < (512 - joystickButtonThreshold);
  joyDown = joystickY > (512 + joystickButtonThreshold);
  joyLeft = joystickX < (512 - joystickButtonThreshold);
  joyRight = joystickX > (512 + joystickButtonThreshold);

  switch (currentState) {
    case MainMenu:
      {
        if (prevState != MainMenu) {
          lcd.clear();
          lcd.setCursor(0, 0);
          lcd.print(MODE_NAME);
          lcd.setCursor(0, 1);
          lcd.print("      START     ");
          cursorPosition = 5;
          prevState = MainMenu;
        }

        lcd.setCursor(cursorPosition, 1);

        if (millis() % 600 < 400) {
          lcd.print(">");
        } else {
          lcd.print(" ");
        }

        if (button1.isPressed()) {
          lcd.clear();
          currentState = Editing;
          prevState = MainMenu;
        }
      }
      break;

    case Editing:
      if (prevState != Editing) {
        lcd.clear();
        prevState = Editing;
      }
      lcd.setCursor(0, 0);
      lcd.print(":");
      lcd.setCursor(1, 0);
      lcd.print(text);

      if (joyUp) {
        DEBUG_PRINTLN(currentCharacter);
        if (currentCharacter > 0) {
          currentCharacter--;
          lcd.print(alphabet[currentCharacter]);
        }
        delay(250);

      } else if (joyDown) {
        DEBUG_PRINTLN(currentCharacter);
        if (currentCharacter < (alphabetSize - 1)) {
          currentCharacter++;
          lcd.print(alphabet[currentCharacter]);
        }
        delay(250);
      } else {
        if (millis() % 600 < 450) {
          lcd.print(alphabet[currentCharacter]);
        } else {
          lcd.print(" ");
        }
      }

      if (joyLeft) {
        if (text.length() > 0) {
          text.remove(text.length() - 1);
          lcd.setCursor(0, 0);
          lcd.print(MENU_CLEAR);
          lcd.setCursor(1, 0);
          lcd.print(text);
        }
        delay(250);

      } else if (joyRight) {
        if (currentCharacter == 0) {
          text += ' ';
        } else {
          text += alphabet[currentCharacter];
          currentCharacter = 0;
        }
        delay(250);
      }

      if (button1.isPressed()) {
        if (currentCharacter == 0) {
          text += ' ';
        } else {
          text += alphabet[currentCharacter];
          currentCharacter = 0;
        }
        lcd.clear();
        currentState = PrintConfirmation;
        prevState = Editing;
      }

      break;

    case PrintConfirmation:
      if (prevState == Editing) {
        lcd.setCursor(0, 0);
        lcd.print(PRINT_CONF);
        lcd.setCursor(0, 1);
        lcd.print("   YES     NO   ");
        lcd.setCursor(2, 1);
        cursorPosition = 2;
        prevState = PrintConfirmation;
      }

      if (joyLeft) {
        lcd.setCursor(0, 1);
        lcd.print("   YES     NO   ");
        lcd.setCursor(2, 1);
        cursorPosition = 2;
        delay(200);
      } else if (joyRight) {
        lcd.setCursor(0, 1);
        lcd.print("   YES     NO   ");
        lcd.setCursor(10, 1);
        cursorPosition = 10;
        delay(200);
      }

      lcd.setCursor(cursorPosition, 1);

      if (millis() % 600 < 400) {  // Blink every 500 ms
        lcd.print(">");
      } else {
        lcd.print(" ");
      }

      if (button1.isPressed()) {
        if (cursorPosition == 2) {
          lcd.clear();
          currentState = Printing;
          prevState = PrintConfirmation;

        } else if (cursorPosition == 10) {
          lcd.clear();
          currentState = Editing;
          prevState = PrintConfirmation;
        }
      }

      break;

    case Printing:
      if (prevState == PrintConfirmation) {
        lcd.setCursor(0, 0);
        lcd.print(PRINTING);  //update screen
      }

      // ----------------------------------------------- plot text
      plotText(text, xpos, ypos);

      // Move to new line and reset
      // line(xpos + space, 0, 0);  // move to new line
      // line25Scale(xpos + space, 0, 0);  // move to new line 
      // TODO make the above work again
      
      xpos = 0;
      ypos = 0;

      text = "";
      yStepper.step(-2250); // MINE: Moves the motor forwards a bit for the next label.
      releaseMotors();
      lcd.clear();
      currentState = Editing;
      prevState = Printing;

      break;
  }
}


// These are the max values the label maker uses per character
const int maxXStepperPos = 1200;
const int maxYStepperPos = 3200; // 3.5x more steps needed to screw up same distance

// The multiplieres needed to scale 255 to the max stepper pos
const int stepper255ScalerX = maxXStepperPos / MaxYSize;
const int stepper255ScalerY = maxYStepperPos / MaxYSize;

// My version
void plotText(String &str, int x, int y) {  //takes in our label as a string, and breaks it up by character for plotting
  // y is always 0

  int pos = 0;                              // pos is where the letter will start, gets added to with each new letter

  int spaceBetweenChars = 20;              // This is on a 255* scale which is why it is a lower number

  for (int i = 0; i < str.length(); i++) {
    char c = char(str.charAt(i));
    if (byte(c) != 195) {
      if (c == ' ') {  //if it's a space, add a space.
        pos += space;
      } else {
        int characterWidth = (int) plotCharacter(c, x + pos, y);
        pos += characterWidth + spaceBetweenChars; // Move the width of the character, plus some extra space forwards for the next one
      }
    }
    DEBUG_PRINTLN(pos);
  }
  releaseMotors();
}

// My version
uint8_t plotCharacter(char c, int x, int y) {
  // Returns the width of the character
  // As we draw, keep track of furthest X point so we know how far to move the starting pos of the next char

  DEBUG_PRINTLN(c);

  // Keep track of max x pos, we'll use it to determin how far to move for next letter.
  uint8_t maxXPos = 0;

  const Letter* letterA = getLetter(c);
  if (letterA != nullptr) {
      for (int i = 0; i < letterA->contourCount; ++i) {
          const Contour& contour = letterA->contours[i];
          // DEBUG_PRINT("Contour ");
          // DEBUG_PRINT(i);
          // DEBUG_PRINTLN(":");

          // Move pen to start of contour
          const Point& firstPoint = contour.points[0];
          line25Scale(x+ firstPoint.x, firstPoint.y, false);

          // Loop through each, drawing from one point to the next
          for (int j = 1; j < contour.pointCount; ++j) {
              const Point& point = contour.points[j];
              int pointX = (int) point.x;
              int pointY = (int) point.y;

              // Apparently the x axis needs inverting
              // pointX = 255 - pointX; // this won't work because there is extra buffer space to the right of the char...

              // DEBUG_PRINT("Point ");
              // DEBUG_PRINT(j);
              // DEBUG_PRINT(": (");
              // DEBUG_PRINT(point.x);
              // DEBUG_PRINT(", ");
              // DEBUG_PRINT(point.y);
              // DEBUG_PRINTLN(")");

              line25Scale(x + pointX, pointY, true);

              // Keep track of furthest x point
              if (point.x > maxXPos) {
                maxXPos = point.x;
              }
          }
      }
  } else {
      DEBUG_PRINTLN("Letter not found");
  }

  return maxXPos;
}

void line25Scale(int newx, int newy, bool drawing) {
  // Rescale input from 0 through 255 to 0 through whatever the max stepper pos is per character
  // And apparently flip it upside down too

  // DEBUG_PRINTLN("Line:");
  // DEBUG_PRINTLN(newx*stepper255ScalerX);
  // DEBUG_PRINTLN(newy*stepper255ScalerY);
  
  // line(maxXStepperPos-(newx*stepper255ScalerX), maxYStepperPos-(newy*stepper255ScalerY), drawing);
  line(newx*stepper255ScalerX, maxYStepperPos-(newy*stepper255ScalerY), drawing);
}

void line(int newx, int newy, bool drawing) {
  // My note: This function appears to take x and y input in the number of steps the stepper motors make.

  //this function is an implementation of bresenhams line algorithm
  //this algorithm basically finds the slope between any two points, allowing us to figure out how many steps each motor should do to move smoothly to the target
  //in order to do this, we give this function our next X (newx) and Y (newy) coordinates, and whether the pen should be up or down (drawing)

  if (drawing < 2) {  //checks if we should be drawing and puts the pen up or down based on that.
    penDown(drawing);    // dashed: 0= don't draw / 1=draw / 2... = draw dashed with variable dash width
  } else {
    penDown((stepCount / drawing) % 2);  //can do dashed lines, but for now this isn't doing anything since we're only sending 0 or 1.
  }

  int i;
  long over = 0;

  long dx = newx - xpos;  //calculate the difference between where we are (xpos) and where we want to be (newx)
  long dy = newy - ypos;
  int dirx = dx > 0 ? -1 : 1;
  int diry = dy > 0 ? 1 : -1;
  //the reason one of these ^ is inverted logic (1/-1) is due to the direction these motors rotate in the system.

  dx = abs(dx);  //normalize the dx/dy values so that they are positive.
  dy = abs(dy);  //abs() is taking the "absolute value" - basically it removes the negative sign from negative numbers

  //the following nested If statements check which change is greater, and use that to determine which coordinate (x or y) get's treated as the rise or the run in the slope calculation
  //we have to do this because technically bresenhams only works for the positive quandrant of the cartesian coordinate grid,
  // so we are just flipping the values around to get the line moving in the correct direction relative to it's current position (instead of just up an to the right)
  if (dx > dy) {
    over = dx / 2;
    for (i = 0; i < dx; i++) {  //for however much our current position differs from the target,
      xStepper.step(dirx);      //do a step in that direction (remember, dirx is always going to be either 1 or -1 from the ternary operator above)

      // DEBUG_PRINT("Xsteps: ");
      // DEBUG_PRINT(dirx);
      // DEBUG_PRINT("  ");

      over += dy;
      if (over >= dx) {
        over -= dx;

        // DEBUG_PRINT("Ysteps: ");
        // DEBUG_PRINTLN(diry);

        yStepper.step(diry);
      }
      //delay(1);
    }
  } else {
    over = dy / 2;
    for (i = 0; i < dy; i++) {
      yStepper.step(diry);
      // DEBUG_PRINT("Ysteps: ");
      // DEBUG_PRINT(diry);
      // DEBUG_PRINT("  ");
      over += dx;
      if (over >= dy) {
        over -= dy;
        // DEBUG_PRINT("Xsteps: ");
        // DEBUG_PRINTLN(dirx);
        xStepper.step(dirx);
      }
      //delay(1);
    }
  }
  xpos = newx;  //store positions
  ypos = newy;  //store positions
}

void penDown(boolean penOnPaper) {  //used to handle lifting or lowering the pen on to the tape
  if (penOnPaper) {              //if the pen is already up, put it down
    angle = 80;
  } else {  //if down, then lift up.
    angle = 25;
  }
  servo.write(angle);                        //actuate the servo to either position.
  if (penOnPaper != pPenOnPaper) delay(50);  //gives the servo time to move before jumping into the next action
  pPenOnPaper = penOnPaper;                  //store the previous state.
}

void penUp() {  //singular command to lift the pen up
  servo.write(25);
}

void releaseMotors() {
  for (int i = 0; i < 4; i++) {  //deactivates all the motor coils
    digitalWrite(xPins[i], 0);   //just picks each motor pin and send 0 voltage
    digitalWrite(yPins[i], 0);
  }
  penDown(false);
}

void homeYAxis() {
  yStepper.step(-3000);  //lowers the pen holder to it's lowest position.
}

void resetScreen() {
  lcd.clear();
  lcd.setCursor(0, 0);
  lcd.print(MENU_CLEAR);
  lcd.setCursor(1, 0);
  cursorPosition = 1;
}

